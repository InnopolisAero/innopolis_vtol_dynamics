# Notation:
# We use FRD and NED notation and look on the vehicle from the above from tail to nose.
# The roll, pitch, and yaw directions adhere to the right-hand rule:
# Roll: Positive roll is clockwise when looking from the tail forward.
# Pitch: Positive pitch is nose-up (tail down), effectively clockwise when viewed from the side.
# Yaw: Positive yaw is clockwise when viewed from above the UAV.

# Reference: https://github.com/PX4/PX4-SITL_gazebo-classic/blob/main/models/standard_vtol/standard_vtol.sdf.jinja

sim:
  init_position: [55.75690, 48.74115, -7.8] # [lat (degree), lon (degree), alt (meters)]

  # Initial Yaw
  #   - 0 degrees yaw points towards North.
  #   - Yaw increases clockwise.
  #  (0 => North, -90 => East, -180 => South, -90 => West)
  init_yaw_deg: 45.0  # Initial yaw angle in degrees

  integration_frequency: 1000 # Hz

environment:
  # This is the standard acceleration due to gravity on Earth's surface.
  # If you are simulating in a different planetary context or need slight
  # variations due to altitude changes, you might adjust it slightly.
  gravity: 9.80665  # m/s^2

  # This is the standard atmospheric density at sea level at 15Â°C under
  # International Standard Atmosphere (ISA) conditions. Atmospheric density
  # decreases with altitude, so if you are simulating high-altitude UAV
  # operations, you might use a lower value. For example:
  # At 5000 m altitude: ~0.736 kg/m^3
  # At 10,000 m altitude: ~0.413 kg/m^3
  air_density: 1.2  # air density (kg/m^3)

  wind_ned: [0.0, 0.0, 0.0]

vehicle:
  mass: 5.0 # kg
  inertia: [0.478, 0,     0,
            0,     0.342, 0,
            0,     0,     0.811] # kg*m^2
  center_of_gravity: [-0.15, 0.0, -0.05]
  lon_static_friction: 0.5
  lon_kinetic_friction: 0.4
  lat_static_friction: 0.8
  lat_kinetic_friction: 0.7

actuators:
  bldc_analytic_model:
    max_velocity: 1600.0 # rad/s
    max_thrust: 50.0
    max_torque: 0.7

  bldc_analytic_model2:
    max_velocity: 3500.0 # rad/s
    max_thrust: 120.0
    max_torque: 0.7

  airframe:
    - name: Channel 1 - Disabled
      type: motor
      position: [0, 0, 0]
      axis: [0, 0, 0]
      direction_ccw: True
      model: bldc_analytic_model

    - name: Channel 2 - Disabled
      type: motor
      position: [0, 0, 0]
      axis: [0, 0, 0]
      direction_ccw: True
      model: bldc_analytic_model

    - name: Channel 3 - Rudder
      type: servo
      cm: [0.00, 0.00, 1.15]
      time_constant: 0.01
      max_angle_deg: 20

    - name: Channel 4 - Left Flap
      type: motor
      position: [0, 0, 0]
      axis: [0, 0, 0]
      direction_ccw: True
      model: bldc_analytic_model

    - name: Channel 5 - Forward Pusher
      type: motor
      position: [0.20, 0.00, 0.00]
      axis: [1.0, 0.00, 0.00]
      direction_ccw: True
      model: bldc_analytic_model2

    - name: Channel 6 - Left Aileron
      type: servo
      cm: [-0.2, 0.00, 0.02]
      time_constant: 0.01
      max_angle_deg: 20

    - name: Channel 7 - Right Aileron
      type: servo
      cm: [+0.2, 0.00, -0.02]
      time_constant: 0.01
      max_angle_deg: 20

    - name: Channel 8 - Elevator
      type: servo
      cm: [0.00, 0.458, 0.00]
      time_constant: 0.01
      max_angle_deg: 20

    - name: Channel 9 - Right Flap Reverse
      type: motor
      position: [0, 0, 0]
      axis: [0, 0, 0]
      direction_ccw: True
      model: bldc_analytic_model

sensors:
  acc_variance:  0.0005
  gyro_variance: 0.0005

aerodynamics:

  # Reference Geometry
  # Used to convert dimensionless aerodynamic coefficients into physical forces and moments.
  reference_data:
    wing_area: 0.65     # Wing area [m^2]
    mean_chord: 0.25    # Mean aerodynamic chord [m]
    wing_span: 2.4      # Wingspan [m]

  # Baseline Aerodynamic Coefficients
  #
  # Divided into "longitudinal" (alpha-based) and "lateral" (beta-based) sections,
  # plus dynamic derivatives.
  # 
  # The 'independent_variables' define the breakpoints for interpolation:
  #  - alpha_deg or beta_deg (the angle)
  #  - speed_ms (the airspeed in m/s)
  #
  # The 'data' block provides 2D tables of aerodynamic coefficients, 
  # dimensioned as [nAngles x nSpeeds].
  #
  # For example, alpha_deg has 21 entries from -20 to +20, 
  # and speed_ms has 8 entries from 5 to 40.

  baseline:

    # Longitudinal Data
    # Coefficients that vary with angle of attack (alpha_deg) and airspeed (speed_ms)
    longitudinal:
      independent_variables:
        # Angle of attack [deg]
        alpha_deg: [-50, -40, -30, -20, -10, 0, 10, 20, 30, 40, 50]
        # Aircraft speed relative to the air [m/s]
        speed_ms: [1, 8, 15, 22, 29, 36, 43]
        
      data:
        # CL: Lift coefficient table [alpha_deg x speed_ms]
        CL:
          - [-1.7075, -1.7075, -1.7075, -1.7075, -1.7075, -1.7075, -1.7075]
          - [-1.7075, -1.7075, -1.7075, -1.7075, -1.7075, -1.7075, -1.7075]
          - [-1.7075, -1.7075, -1.7075, -1.7075, -1.7075, -1.7075, -1.7075]
          - [-1.7075, -1.7075, -1.7075, -1.7075, -1.7075, -1.7075, -1.7075]
          - [-0.6443, -0.6443, -0.6443, -0.6443, -0.6443, -0.6443, -0.6443]
          - [ 0.5600,  0.5600,  0.5600,  0.5600,  0.5600,  0.5600,  0.5600]
          - [ 1.7643,  1.7643,  1.7643,  1.7643,  1.7643,  1.7643,  1.7643]
          - [ 2.9624,  2.9624,  2.9624,  2.9624,  2.9624,  2.9624,  2.9624]
          - [ 0.6868,  0.6868,  0.6868,  0.6868,  0.6868,  0.6868,  0.6868]
          - [ 0.6331,  0.6331,  0.6331,  0.6331,  0.6331,  0.6331,  0.6331]
          - [ 0.7544,  0.7544,  0.7544,  0.7544,  0.7544,  0.7544,  0.7544]

        # CD: Drag coefficient table [alpha_deg x speed_ms]
        CD:
          - [1.2904, 1.2904, 1.2904, 1.2904, 1.2904, 1.2904, 1.2904]
          - [0.8233, 0.8233, 0.8233, 0.8233, 0.8233, 0.8233, 0.8233]
          - [0.4720, 0.4720, 0.4720, 0.4720, 0.4720, 0.4720, 0.4720]
          - [0.2364, 0.2364, 0.2364, 0.2364, 0.2364, 0.2364, 0.2364]
          - [0.1166, 0.1166, 0.1166, 0.1166, 0.1166, 0.1166, 0.1166]
          - [0.1125, 0.1125, 0.1125, 0.1125, 0.1125, 0.1125, 0.1125]
          - [0.2242, 0.2242, 0.2242, 0.2242, 0.2242, 0.2242, 0.2242]
          - [0.4517, 0.4517, 0.4517, 0.4517, 0.4517, 0.4517, 0.4517]
          - [0.7950, 0.7950, 0.7950, 0.7950, 0.7950, 0.7950, 0.7950]
          - [1.2540, 1.2540, 1.2540, 1.2540, 1.2540, 1.2540, 1.2540]
          - [1.8288, 1.8288, 1.8288, 1.8288, 1.8288, 1.8288, 1.8288]
        
        # Cm: Pitching moment coefficient table [alpha_deg x speed_ms]
        Cm:
          - [ 1.8118,  1.8118,  1.8118,  1.8118,  1.8118,  1.8118,  1.8118]
          - [ 1.5427,  1.5427,  1.5427,  1.5427,  1.5427,  1.5427,  1.5427]
          - [ 1.3513,  1.3513,  1.3513,  1.3513,  1.3513,  1.3513,  1.3513]
          - [ 1.2282,  1.2282,  1.2282,  1.2282,  1.2282,  1.2282,  1.2282]
          - [ 0.5606,  0.5606,  0.5606,  0.5606,  0.5606,  0.5606,  0.5606]
          - [-0.2685, -0.2685, -0.2685, -0.2685, -0.2685, -0.2685, -0.2685]
          - [-1.1601, -1.1601, -1.1601, -1.1601, -1.1601, -1.1601, -1.1601]
          - [-2.0801, -2.0801, -2.0801, -2.0801, -2.0801, -2.0801, -2.0801]
          - [-0.8479, -0.8479, -0.8479, -0.8479, -0.8479, -0.8479, -0.8479]
          - [-1.1076, -1.1076, -1.1076, -1.1076, -1.1076, -1.1076, -1.1076]
          - [-1.5778, -1.5778, -1.5778, -1.5778, -1.5778, -1.5778, -1.5778]

    # Lateral Data
    # Coefficients that primarily depend on sideslip angle (beta_deg) and airspeed (speed_ms)
    lateral:
      independent_variables:
        # beta_deg: Sideslip angle [deg]
        beta_deg: [-90, -80, -70, -60, -50, -40, -30, -20, -10, 0, 10, 20, 30, 40, 50, 60, 70, 80, 90]
        # Aircraft speed relative to the air [m/s]
        speed_ms: [1, 8, 15, 22, 29, 36, 43]

      data:
        # CY: Side force coefficient [beta_deg x speed_ms]
        CY:
          - [ 1.5394,  1.5394,  1.5394,  1.5394,  1.5394,  1.5394,  1.5394]
          - [ 1.3683,  1.3683,  1.3683,  1.3683,  1.3683,  1.3683,  1.3683]
          - [ 1.1973,  1.1973,  1.1973,  1.1973,  1.1973,  1.1973,  1.1973]
          - [ 1.0263,  1.0263,  1.0263,  1.0263,  1.0263,  1.0263,  1.0263]
          - [ 0.8552,  0.8552,  0.8552,  0.8552,  0.8552,  0.8552,  0.8552]
          - [ 0.6842,  0.6842,  0.6842,  0.6842,  0.6842,  0.6842,  0.6842]
          - [ 0.5131,  0.5131,  0.5131,  0.5131,  0.5131,  0.5131,  0.5131]
          - [ 0.3421,  0.3421,  0.3421,  0.3421,  0.3421,  0.3421,  0.3421]
          - [ 0.1710,  0.1710,  0.1710,  0.1710,  0.1710,  0.1710,  0.1710]
          - [ 0.0000,  0.0000,  0.0000,  0.0000,  0.0000,  0.0000,  0.0000]
          - [-0.1710, -0.1710, -0.1710, -0.1710, -0.1710, -0.1710, -0.1710]
          - [-0.3421, -0.3421, -0.3421, -0.3421, -0.3421, -0.3421, -0.3421]
          - [-0.5131, -0.5131, -0.5131, -0.5131, -0.5131, -0.5131, -0.5131]
          - [-0.6842, -0.6842, -0.6842, -0.6842, -0.6842, -0.6842, -0.6842]
          - [-0.8552, -0.8552, -0.8552, -0.8552, -0.8552, -0.8552, -0.8552]
          - [-1.0263, -1.0263, -1.0263, -1.0263, -1.0263, -1.0263, -1.0263]
          - [-1.1973, -1.1973, -1.1973, -1.1973, -1.1973, -1.1973, -1.1973]
          - [-1.3683, -1.3683, -1.3683, -1.3683, -1.3683, -1.3683, -1.3683]
          - [-1.5394, -1.5394, -1.5394, -1.5394, -1.5394, -1.5394, -1.5394]
        
        # Cl: Rolling moment coefficient [beta_deg x speed_ms]
        Cl:
          - [ 0.2206,  0.2206,  0.2206,  0.2206,  0.2206,  0.2206, 0.2206]
          - [ 0.1961,  0.1961,  0.1961,  0.1961,  0.1961,  0.1961, 0.1961]
          - [ 0.1716,  0.1716,  0.1716,  0.1716,  0.1716,  0.1716, 0.1716]
          - [ 0.1470,  0.1470,  0.1470,  0.1470,  0.1470,  0.1470, 0.1470]
          - [ 0.1225,  0.1225,  0.1225,  0.1225,  0.1225,  0.1225, 0.1225]
          - [ 0.0980,  0.0980,  0.0980,  0.0980,  0.0980,  0.0980, 0.0980]
          - [ 0.0735,  0.0735,  0.0735,  0.0735,  0.0735,  0.0735, 0.0735]
          - [ 0.0490,  0.0490,  0.0490,  0.0490,  0.0490,  0.0490, 0.0490]
          - [ 0.0245,  0.0245,  0.0245,  0.0245,  0.0245,  0.0245, 0.0245]
          - [ 0.0000,  0.0000,  0.0000,  0.0000,  0.0000,  0.0000, 0.0000]
          - [-0.0245, -0.0245, -0.0245, -0.0245, -0.0245, -0.0245, -0.0245]
          - [-0.0490, -0.0490, -0.0490, -0.0490, -0.0490, -0.0490, -0.0490]
          - [-0.0735, -0.0735, -0.0735, -0.0735, -0.0735, -0.0735, -0.0735]
          - [-0.0980, -0.0980, -0.0980, -0.0980, -0.0980, -0.0980, -0.0980]
          - [-0.1225, -0.1225, -0.1225, -0.1225, -0.1225, -0.1225, -0.1225]
          - [-0.1470, -0.1470, -0.1470, -0.1470, -0.1470, -0.1470, -0.1470]
          - [-0.1716, -0.1716, -0.1716, -0.1716, -0.1716, -0.1716, -0.1716]
          - [-0.1961, -0.1961, -0.1961, -0.1961, -0.1961, -0.1961, -0.1961]
          - [-0.2206, -0.2206, -0.2206, -0.2206, -0.2206, -0.2206, -0.2206]
        
        # Cn: Yawing moment coefficient [beta_deg x speed_ms]
        Cn:
          - [-0.4889, -0.4889, -0.4889, -0.4889, -0.4889, -0.4889, -0.4889]
          - [-0.4346, -0.4346, -0.4346, -0.4346, -0.4346, -0.4346, -0.4346]
          - [-0.3803, -0.3803, -0.3803, -0.3803, -0.3803, -0.3803, -0.3803]
          - [-0.3259, -0.3259, -0.3259, -0.3259, -0.3259, -0.3259, -0.3259]
          - [-0.2716, -0.2716, -0.2716, -0.2716, -0.2716, -0.2716, -0.2716]
          - [-0.2173, -0.2173, -0.2173, -0.2173, -0.2173, -0.2173, -0.2173]
          - [-0.1630, -0.1630, -0.1630, -0.1630, -0.1630, -0.1630, -0.1630]
          - [-0.1086, -0.1086, -0.1086, -0.1086, -0.1086, -0.1086, -0.1086]
          - [-0.0543, -0.0543, -0.0543, -0.0543, -0.0543, -0.0543, -0.0543]
          - [ 0.0000,  0.0000,  0.0000,  0.0000,  0.0000,  0.0000,  0.0000]
          - [ 0.0543,  0.0543,  0.0543,  0.0543,  0.0543,  0.0543,  0.0543]
          - [ 0.1086,  0.1086,  0.1086,  0.1086,  0.1086,  0.1086,  0.1086]
          - [ 0.1630,  0.1630,  0.1630,  0.1630,  0.1630,  0.1630,  0.1630]
          - [ 0.2173,  0.2173,  0.2173,  0.2173,  0.2173,  0.2173,  0.2173]
          - [ 0.2716,  0.2716,  0.2716,  0.2716,  0.2716,  0.2716,  0.2716]
          - [ 0.3259,  0.3259,  0.3259,  0.3259,  0.3259,  0.3259,  0.3259]
          - [ 0.3803,  0.3803,  0.3803,  0.3803,  0.3803,  0.3803,  0.3803]
          - [ 0.4346,  0.4346,  0.4346,  0.4346,  0.4346,  0.4346,  0.4346]
          - [ 0.4889,  0.4889,  0.4889,  0.4889,  0.4889,  0.4889,  0.4889]    
    
    # Dynamic Derivatives
    #
    # Terms that model aerodynamic damping from aircraft angular rates:
    dynamic_derivatives:
      Cl_p: -0.5    # Rolling moment change per roll rate (p)
      Cl_r: 0.1     # Rolling moment change per yaw rate (r)
      Cm_q: -0.8    # Pitching moment change per pitch rate (q)
      Cn_p: 0.05    # Yawing moment change per roll rate (p)
      Cn_r: -0.2    # Yawing moment change per yaw rate (r)